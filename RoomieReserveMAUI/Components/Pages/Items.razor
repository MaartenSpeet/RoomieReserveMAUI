@page "/items"
@using Components.Data
@inject NavigationManager NavigationManager

<h1>Items</h1>

@code {
    protected override async Task OnInitializedAsync()
    {
        pm.BackPage = "/boxies";
        pm.ValuesChanged.Invoke();

        await CheckUserState();
    }

    [CascadingParameter]
    public PageManager pm { get; set; }

    [CascadingParameter]
    public User user { get; set; }

    async Task CheckUserState()
    {
        if (user == null)
        {
            await Task.Run(() => NavigationManager.NavigateTo("/login"));
        }
    }
}
